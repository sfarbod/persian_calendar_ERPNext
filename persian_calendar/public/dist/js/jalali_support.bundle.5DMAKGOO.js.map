{
  "version": 3,
  "sources": ["../../../../../apps/persian_calendar/persian_calendar/public/js/jalali_support/jalaali.js", "../../../../../apps/persian_calendar/persian_calendar/public/js/jalali_support/persian_calendar.js", "../../../../../apps/persian_calendar/persian_calendar/public/js/jalali_support/formatters.js", "../../../../../apps/persian_calendar/persian_calendar/public/js/jalali_support/auto_refresh.js"],
  "sourcesContent": ["(function(){\n  // Use Intl.DateTimeFormat with Persian calendar to derive reliable Jalali parts\n  // Force Latin digits by using en locale with u-ca-persian\n  const fmt = new Intl.DateTimeFormat('en-u-ca-persian', { year:'numeric', month:'2-digit', day:'2-digit'});\n  function toJalaliPartsFromGregorianDate(gDate){\n    const parts = fmt.formatToParts(gDate);\n    const map = Object.fromEntries(parts.map(p=>[p.type,p.value]));\n    const jy = parseInt(map.year, 10);\n    const jm = parseInt(map.month, 10);\n    const jd = parseInt(map.day, 10);\n    return { jy, jm, jd };\n  }\n  function toJalali(gy,gm,gd){\n    return toJalaliPartsFromGregorianDate(new Date(Date.UTC(gy, gm-1, gd)));\n  }\n\n  // Simple but accurate Jalali to Gregorian conversion\n  function toGregorian(jy, jm, jd) {\n    // Use a lookup table approach with Intl.DateTimeFormat\n    // Create a range of dates and find the closest match\n    const startYear = 2000;\n    const endYear = 2030;\n    \n    for (let year = startYear; year <= endYear; year++) {\n      for (let month = 1; month <= 12; month++) {\n        for (let day = 1; day <= 31; day++) {\n          try {\n            const testDate = new Date(year, month - 1, day);\n            const testJalali = toJalaliPartsFromGregorianDate(testDate);\n            \n            if (testJalali.jy === jy && testJalali.jm === jm && testJalali.jd === jd) {\n              return {\n                gy: year,\n                gm: month,\n                gd: day\n              };\n            }\n          } catch (e) {\n            // Skip invalid dates\n            continue;\n          }\n        }\n      }\n    }\n    \n    // Fallback: approximate conversion\n    const approximateDate = new Date(2000, 6, 1); // July 1, 2000\n    const approximateJalali = toJalaliPartsFromGregorianDate(approximateDate);\n    \n    const yearDiff = jy - approximateJalali.jy;\n    const monthDiff = jm - approximateJalali.jm;\n    const dayDiff = jd - approximateJalali.jd;\n    \n    const totalDays = yearDiff * 365 + monthDiff * 30 + dayDiff;\n    const resultDate = new Date(approximateDate.getTime() + totalDays * 24 * 60 * 60 * 1000);\n    \n    return {\n      gy: resultDate.getFullYear(),\n      gm: resultDate.getMonth() + 1,\n      gd: resultDate.getDate()\n    };\n  }\n\n  // Expose helpers\n  window.toJalali = toJalali;\n  window.toGregorian = toGregorian;\n  window.toJalaliPartsFromGregorianDate = toJalaliPartsFromGregorianDate;\n})();\n\n\n", "(async function() {\n  frappe.provide(\"frappe.ui.form\");\n\n  console.log(\"jalali_support script loaded\");\n\n  // Check if Jalali calendar is enabled\n  let jalaliEnabled = false;\n  try {\n    const result = await frappe.call({ method: \"persian_calendar.jalali_support.api.is_jalali_enabled\" });\n    jalaliEnabled = result && result.message;\n    console.log(\"Jalali calendar enabled:\", jalaliEnabled);\n  } catch(e) {\n    console.log(\"Error checking Jalali settings:\", e);\n    jalaliEnabled = false;\n  }\n\n  if (!jalaliEnabled) {\n    console.log(\"Jalali calendar is disabled, skipping datepicker overrides\");\n    return; // Exit the entire script if disabled\n  }\n\n  // If Jalali is enabled, proceed with fetching week bounds and overriding controls\n  let FIRST_DAY = 6;\n  try {\n    const r = await frappe.call({ method: \"persian_calendar.jalali_support.api.get_week_bounds\" });\n    if (r && r.message && r.message.week_start != null) {\n      FIRST_DAY = r.message.week_start;\n    }\n    console.log(\"Week start day:\", FIRST_DAY);\n  } catch(e) {\n    console.log(\"Error fetching week bounds:\", e);\n  }\n\nfunction gToJ(gDate) {\n  return toJalali(gDate.getFullYear(), gDate.getMonth() + 1, gDate.getDate());\n}\n\nfunction jToG(jy, jm, jd) {\n  return toGregorian(jy, jm, jd);\n}\n\nfunction formatJalaliDate(jy, jm, jd) {\n  return `${jy}-${String(jm).padStart(2,\"0\")}-${String(jd).padStart(2,\"0\")}`;\n}\n\nfunction parseJalaliDate(dateStr) {\n  const parts = dateStr.split('-').map(Number);\n  if (parts.length !== 3) return null;\n  return { jy: parts[0], jm: parts[1], jd: parts[2] };\n}\n\nfunction overrideControlsWhenReady() {\n  const hasControls = frappe && frappe.ui && frappe.ui.form && frappe.ui.form.ControlDate && frappe.ui.form.ControlDatetime;\n  if (!hasControls) {\n    setTimeout(overrideControlsWhenReady, 50);\n    return;\n  }\n\n  const BaseControlDate = frappe.ui.form.ControlDate;\n  const BaseControlDatetime = frappe.ui.form.ControlDatetime;\n\n  // Check if already patched\n  if (BaseControlDate.__jalali_patched) {\n    return;\n  }\n\n  class JalaliControlDate extends BaseControlDate {\n    make_input() {\n      // Create input element manually to avoid flatpickr initialization\n      this.$input = this.$wrapper.find('input');\n      if (!this.$input.length) {\n        this.$input = $(`<input class=\"form-control\" type=\"text\">`);\n        this.$wrapper.append(this.$input);\n      }\n      \n      // Remove any existing flatpickr attributes and classes\n      this.$input.removeAttr('data-input');\n      this.$input.removeClass('flatpickr-input');\n      this.$input.removeAttr('readonly');\n      \n      // Make input editable for better UX\n      this.$input.attr('readonly', false);\n      \n      // Create custom Jalali datepicker\n      this.createJalaliDatepicker();\n    }\n\n    createJalaliDatepicker() {\n      const me = this;\n      const $input = this.$input;\n      \n      // Remove existing calendar if any\n      $input.siblings('.jalali-calendar').remove();\n      \n      // Create calendar container\n      const $calendar = $(`\n        <div class=\"jalali-calendar\" style=\"display: none; position: absolute; background: white; border: 1px solid #ccc; border-radius: 4px; padding: 10px; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); min-width: 280px;\">\n          <div class=\"calendar-header\" style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\n            <button type=\"button\" class=\"prev-year\" style=\"background: none; border: none; cursor: pointer; padding: 5px; font-size: 16px;\">\u2039\u2039</button>\n            <button type=\"button\" class=\"prev-month\" style=\"background: none; border: none; cursor: pointer; padding: 5px; font-size: 16px;\">\u2039</button>\n            <span class=\"current-month-year\" style=\"font-weight: bold; cursor: pointer; padding: 5px; border-radius: 3px; min-width: 120px; text-align: center;\" title=\"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u0633\u0627\u0644 \u0648 \u0645\u0627\u0647\"></span>\n            <button type=\"button\" class=\"next-month\" style=\"background: none; border: none; cursor: pointer; padding: 5px; font-size: 16px;\">\u203A</button>\n            <button type=\"button\" class=\"next-year\" style=\"background: none; border: none; cursor: pointer; padding: 5px; font-size: 16px;\">\u203A\u203A</button>\n          </div>\n          <div class=\"calendar-weekdays\" style=\"display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; margin-bottom: 5px;\">\n            <!-- Weekdays will be populated dynamically based on FIRST_DAY -->\n          </div>\n          <div class=\"calendar-days\" style=\"display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; margin-bottom: 10px;\"></div>\n          <div class=\"calendar-footer\" style=\"text-align: center; border-top: 1px solid #eee; padding-top: 8px;\">\n            <button type=\"button\" class=\"today-btn\" style=\"background: #007bff; color: white; border: none; padding: 6px 12px; border-radius: 3px; cursor: pointer; font-size: 12px;\">\u0627\u0645\u0631\u0648\u0632</button>\n          </div>\n        </div>\n      `);\n      \n      // Insert calendar after input\n      $input.after($calendar);\n      \n      // Current Jalali date - get current date\n      const now = new Date();\n      let currentJalali = gToJ(now);\n      \n      // Store calendar reference for easy access\n      me.$jalaliCalendar = $calendar;\n      \n      // Update calendar display\n      const updateCalendar = () => {\n        const monthNames = ['\u0641\u0631\u0648\u0631\u062F\u06CC\u0646', '\u0627\u0631\u062F\u06CC\u0628\u0647\u0634\u062A', '\u062E\u0631\u062F\u0627\u062F', '\u062A\u06CC\u0631', '\u0645\u0631\u062F\u0627\u062F', '\u0634\u0647\u0631\u06CC\u0648\u0631', \n                          '\u0645\u0647\u0631', '\u0622\u0628\u0627\u0646', '\u0622\u0630\u0631', '\u062F\u06CC', '\u0628\u0647\u0645\u0646', '\u0627\u0633\u0641\u0646\u062F'];\n        \n        $calendar.find('.current-month-year').text(`${monthNames[currentJalali.jm - 1]} ${currentJalali.jy}`);\n        \n        // Update weekdays based on FIRST_DAY\n        const weekdayNames = ['\u06CC', '\u062F', '\u0633', '\u0686', '\u067E', '\u062C', '\u0634']; // Sunday=0 to Saturday=6\n        const $weekdaysContainer = $calendar.find('.calendar-weekdays');\n        $weekdaysContainer.empty();\n        \n        // Start from FIRST_DAY and cycle through 7 days\n        for (let i = 0; i < 7; i++) {\n          const dayIndex = (FIRST_DAY + i) % 7;\n          const $weekday = $(`<div style=\"text-align: center; font-weight: bold; padding: 5px; font-size: 12px;\">${weekdayNames[dayIndex]}</div>`);\n          $weekdaysContainer.append($weekday);\n        }\n        \n        // Generate days for current month\n        const daysInMonth = currentJalali.jm <= 6 ? 31 : (currentJalali.jm <= 11 ? 30 : (currentJalali.jy % 4 === 3 ? 30 : 29));\n        const $daysContainer = $calendar.find('.calendar-days');\n        $daysContainer.empty();\n        \n        for (let day = 1; day <= daysInMonth; day++) {\n          const $day = $(`<div class=\"calendar-day\" data-day=\"${day}\" style=\"text-align: center; padding: 8px; cursor: pointer; border-radius: 3px; transition: all 0.2s;\">${day}</div>`);\n          \n          // Add hover effect\n          $day.on('mouseenter', function() {\n            if (!$(this).hasClass('selected')) {\n              $(this).css('background-color', '#f8f9fa');\n            }\n          }).on('mouseleave', function() {\n            if (!$(this).hasClass('selected')) {\n              $(this).css('background-color', '');\n            }\n          });\n          \n          // Highlight current day if it matches input value\n          const inputValue = $input.val();\n          if (inputValue) {\n            const jalali = parseJalaliDate(inputValue);\n            if (jalali && jalali.jy === currentJalali.jy && jalali.jm === currentJalali.jm && jalali.jd === day) {\n              $day.addClass('selected').css('background-color', '#007bff').css('color', 'white');\n            }\n          }\n          \n          // Day click handler\n          $day.on('click', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            \n            const selectedDay = parseInt($(this).data('day'));\n            console.log('Selected day:', selectedDay, 'Current Jalali before:', currentJalali);\n            \n            // Check if this day is already selected (has blue background)\n            const isAlreadySelected = $(this).hasClass('selected') && $(this).css('background-color') === 'rgb(0, 123, 255)';\n            \n            if (isAlreadySelected) {\n              // If clicking on already selected day, clear the selection\n              console.log('Clearing selection for day:', selectedDay);\n              \n              // Remove highlight from all days\n              $calendar.find('.calendar-day').removeClass('selected').css('background-color', '').css('color', '');\n              \n              // Clear input value\n              $input.val('');\n              \n              // Close calendar immediately\n              console.log('Hiding calendar...');\n              $calendar.hide();\n              \n              // Set empty value using Frappe's method\n              setTimeout(() => {\n                console.log('Calling set_value with empty string...');\n                me.set_value('');\n              }, 10);\n              \n              return; // Exit early\n            }\n            \n            // Create a fresh Jalali date object with the selected day\n            const newJalali = {\n              jy: currentJalali.jy,\n              jm: currentJalali.jm,\n              jd: selectedDay\n            };\n            console.log('New Jalali:', newJalali);\n            \n            const jalaliStr = formatJalaliDate(newJalali.jy, newJalali.jm, newJalali.jd);\n            console.log('Setting Jalali string:', jalaliStr);\n            \n            // Convert to Gregorian for storage\n            const gregorian = jToG(newJalali.jy, newJalali.jm, newJalali.jd);\n            const gregorianStr = `${gregorian.gy}-${String(gregorian.gm).padStart(2, '0')}-${String(gregorian.gd).padStart(2, '0')}`;\n            console.log('Setting Gregorian string:', gregorianStr);\n            \n            // Update current Jalali date first\n            currentJalali.jd = selectedDay;\n            \n            // Update calendar to highlight selected day immediately\n            $calendar.find('.calendar-day').removeClass('selected').css('background-color', '').css('color', '');\n            $(this).addClass('selected').css('background-color', '#007bff').css('color', 'white');\n            \n            // Set input value directly first\n            $input.val(jalaliStr);\n            \n            // Close calendar immediately\n            console.log('Hiding calendar...');\n            $calendar.hide();\n            \n            // Set the value using Frappe's method after hiding calendar\n            setTimeout(() => {\n              console.log('Calling set_value...');\n              me.set_value(gregorianStr);\n            }, 10);\n          });\n          \n          $daysContainer.append($day);\n        }\n      };\n      \n      // Navigation handlers\n      $calendar.find('.prev-year').on('click', () => {\n        currentJalali.jy--;\n        updateCalendar();\n      });\n      \n      $calendar.find('.next-year').on('click', () => {\n        currentJalali.jy++;\n        updateCalendar();\n      });\n      \n      $calendar.find('.prev-month').on('click', () => {\n        if (currentJalali.jm === 1) {\n          currentJalali.jm = 12;\n          currentJalali.jy--;\n        } else {\n          currentJalali.jm--;\n        }\n        updateCalendar();\n      });\n      \n      $calendar.find('.next-month').on('click', () => {\n        if (currentJalali.jm === 12) {\n          currentJalali.jm = 1;\n          currentJalali.jy++;\n        } else {\n          currentJalali.jm++;\n        }\n        updateCalendar();\n      });\n      \n          // Click on month/year to show quick selection\n          $calendar.find('.current-month-year').on('click', () => {\n            const newYear = prompt('\u0633\u0627\u0644 \u062C\u062F\u06CC\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F:', currentJalali.jy);\n            if (newYear && !isNaN(newYear) && newYear > 1300 && newYear < 1500) {\n              currentJalali.jy = parseInt(newYear);\n              updateCalendar();\n            }\n          });\n\n          // Today button handler\n          $calendar.find('.today-btn').on('click', () => {\n            const today = new Date();\n            const todayJalali = gToJ(today);\n            \n            // Set to today's date\n            currentJalali = { jy: todayJalali.jy, jm: todayJalali.jm, jd: todayJalali.jd };\n            \n            const jalaliStr = formatJalaliDate(todayJalali.jy, todayJalali.jm, todayJalali.jd);\n            $input.val(jalaliStr);\n            \n            // Convert to Gregorian for storage\n            const gregorian = jToG(todayJalali.jy, todayJalali.jm, todayJalali.jd);\n            const gregorianStr = `${gregorian.gy}-${String(gregorian.gm).padStart(2, '0')}-${String(gregorian.gd).padStart(2, '0')}`;\n            \n            // Set the value using Frappe's method\n            me.set_value(gregorianStr);\n            \n            // Force update the input display\n            setTimeout(() => {\n              if ($input.val() !== jalaliStr) {\n                $input.val(jalaliStr);\n              }\n            }, 100);\n            \n            // Update calendar and close\n            updateCalendar();\n            $calendar.hide();\n          });\n      \n      // Show calendar on input click\n      $input.on('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        \n        // Set current month to input value if exists\n        const inputValue = $input.val();\n        if (inputValue) {\n          const jalali = parseJalaliDate(inputValue);\n          if (jalali) {\n            currentJalali = { jy: jalali.jy, jm: jalali.jm, jd: jalali.jd };\n          }\n        }\n        \n        updateCalendar();\n        \n        // Position calendar\n        const inputRect = $input[0].getBoundingClientRect();\n        $calendar.css({\n          position: 'fixed',\n          top: inputRect.bottom + window.scrollY + 5,\n          left: inputRect.left + window.scrollX,\n          display: 'block'\n        });\n      });\n      \n      // Hide calendar when clicking outside\n      $(document).on('click', (e) => {\n        if (!$(e.target).closest('.jalali-calendar, .form-control').length) {\n          $calendar.hide();\n        }\n      });\n      \n      // Initialize calendar\n      updateCalendar();\n    }\n\n        set_formatted_input(value) {\n          try {\n            const r = super.set_formatted_input(value);\n\n            // Convert Gregorian to Jalali for display\n            if (value) {\n              const gregorianDate = new Date(value + 'T00:00:00Z');\n              const jalali = gToJ(gregorianDate);\n              const jalaliStr = formatJalaliDate(jalali.jy, jalali.jm, jalali.jd);\n              console.log('set_formatted_input - Gregorian:', value, 'Jalali:', jalaliStr);\n              this.$input.val(jalaliStr);\n              \n              // Only update calendar highlight if calendar is closed (to prevent interference)\n              const $calendar = this.$input.siblings('.jalali-calendar');\n              if ($calendar.length && !$calendar.is(':visible')) {\n                // Update current Jalali date for next time calendar opens\n                // This ensures the calendar shows the correct month/year when reopened\n                const currentJalali = { jy: jalali.jy, jm: jalali.jm, jd: jalali.jd };\n              }\n            }\n\n            return r;\n          } catch(e) {\n            console.log('set_formatted_input error:', e);\n            return super.set_formatted_input(value);\n          }\n        }\n  }\n\n  class JalaliControlDatetime extends BaseControlDatetime {\n    make_input() {\n      // Create input element without calling super.make_input()\n      this.$input = this.$wrapper.find('input');\n      if (!this.$input.length) {\n        this.$input = $(`<input class=\"form-control\" type=\"text\" readonly>`);\n        this.$wrapper.append(this.$input);\n      }\n      \n      // Make input editable for better UX\n      this.$input.attr('readonly', false);\n      \n      // Create custom Jalali datetime picker\n      this.createJalaliDatetimePicker();\n    }\n\n    createJalaliDatetimePicker() {\n      const me = this;\n      const $input = this.$input;\n      \n      // Create datetime picker container\n      const $picker = $(`\n        <div class=\"jalali-datetime-picker\" style=\"display: none; position: absolute; background: white; border: 1px solid #ccc; border-radius: 4px; padding: 10px; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1);\">\n          <div class=\"calendar-header\" style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;\">\n            <button type=\"button\" class=\"prev-month\" style=\"background: none; border: none; cursor: pointer;\">\u2039</button>\n            <span class=\"current-month-year\" style=\"font-weight: bold;\"></span>\n            <button type=\"button\" class=\"next-month\" style=\"background: none; border: none; cursor: pointer;\">\u203A</button>\n          </div>\n          <div class=\"calendar-weekdays\" style=\"display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; margin-bottom: 5px;\">\n            <div style=\"text-align: center; font-weight: bold; padding: 5px;\">\u0634</div>\n            <div style=\"text-align: center; font-weight: bold; padding: 5px;\">\u06CC</div>\n            <div style=\"text-align: center; font-weight: bold; padding: 5px;\">\u062F</div>\n            <div style=\"text-align: center; font-weight: bold; padding: 5px;\">\u0633</div>\n            <div style=\"text-align: center; font-weight: bold; padding: 5px;\">\u0686</div>\n            <div style=\"text-align: center; font-weight: bold; padding: 5px;\">\u067E</div>\n            <div style=\"text-align: center; font-weight: bold; padding: 5px;\">\u062C</div>\n          </div>\n          <div class=\"calendar-days\" style=\"display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; margin-bottom: 10px;\"></div>\n          <div class=\"time-picker\" style=\"display: flex; gap: 10px; align-items: center; justify-content: center;\">\n            <input type=\"number\" class=\"hour-input\" min=\"0\" max=\"23\" placeholder=\"\u0633\u0627\u0639\u062A\" style=\"width: 60px; padding: 5px; border: 1px solid #ccc; border-radius: 3px;\">\n            <span>:</span>\n            <input type=\"number\" class=\"minute-input\" min=\"0\" max=\"59\" placeholder=\"\u062F\u0642\u06CC\u0642\u0647\" style=\"width: 60px; padding: 5px; border: 1px solid #ccc; border-radius: 3px;\">\n          </div>\n          <div class=\"picker-actions\" style=\"display: flex; gap: 10px; justify-content: center; margin-top: 10px;\">\n            <button type=\"button\" class=\"btn-ok\" style=\"background: #007bff; color: white; border: none; padding: 5px 15px; border-radius: 3px; cursor: pointer;\">\u062A\u0623\u06CC\u06CC\u062F</button>\n            <button type=\"button\" class=\"btn-cancel\" style=\"background: #6c757d; color: white; border: none; padding: 5px 15px; border-radius: 3px; cursor: pointer;\">\u0644\u063A\u0648</button>\n          </div>\n        </div>\n      `);\n      \n      // Insert picker after input\n      $input.after($picker);\n      \n      // Current Jalali date - get current date\n      const now = new Date();\n      let currentJalali = gToJ(now);\n      let selectedTime = { hour: now.getHours(), minute: now.getMinutes() };\n      \n      // Update calendar display\n      const updateCalendar = () => {\n        const monthNames = ['\u0641\u0631\u0648\u0631\u062F\u06CC\u0646', '\u0627\u0631\u062F\u06CC\u0628\u0647\u0634\u062A', '\u062E\u0631\u062F\u0627\u062F', '\u062A\u06CC\u0631', '\u0645\u0631\u062F\u0627\u062F', '\u0634\u0647\u0631\u06CC\u0648\u0631', \n                          '\u0645\u0647\u0631', '\u0622\u0628\u0627\u0646', '\u0622\u0630\u0631', '\u062F\u06CC', '\u0628\u0647\u0645\u0646', '\u0627\u0633\u0641\u0646\u062F'];\n        \n        $picker.find('.current-month-year').text(`${monthNames[currentJalali.jm - 1]} ${currentJalali.jy}`);\n        \n        // Generate days for current month\n        const daysInMonth = currentJalali.jm <= 6 ? 31 : (currentJalali.jm <= 11 ? 30 : (currentJalali.jy % 4 === 3 ? 30 : 29));\n        const $daysContainer = $picker.find('.calendar-days');\n        $daysContainer.empty();\n        \n        for (let day = 1; day <= daysInMonth; day++) {\n          const $day = $(`<div class=\"calendar-day\" data-day=\"${day}\" style=\"text-align: center; padding: 8px; cursor: pointer; border-radius: 3px;\">${day}</div>`);\n          \n          // Highlight current day if it matches input value\n          const inputValue = $input.val();\n          if (inputValue) {\n            const parts = inputValue.split(' ');\n            if (parts.length === 2) {\n              const jalali = parseJalaliDate(parts[0]);\n              if (jalali && jalali.jy === currentJalali.jy && jalali.jm === currentJalali.jm && jalali.jd === day) {\n                $day.css('background-color', '#007bff').css('color', 'white');\n              }\n            }\n          }\n          \n          // Day click handler\n          $day.on('click', function() {\n            const selectedDay = parseInt($(this).data('day'));\n            currentJalali.jd = selectedDay;\n            \n            // Update time inputs\n            $picker.find('.hour-input').val(selectedTime.hour);\n            $picker.find('.minute-input').val(selectedTime.minute);\n            \n            // Highlight selected day\n            $picker.find('.calendar-day').removeClass('selected');\n            $(this).addClass('selected');\n          });\n          \n          $daysContainer.append($day);\n        }\n      };\n      \n      // Navigation handlers\n      $picker.find('.prev-month').on('click', () => {\n        if (currentJalali.jm === 1) {\n          currentJalali.jm = 12;\n          currentJalali.jy--;\n        } else {\n          currentJalali.jm--;\n        }\n        updateCalendar();\n      });\n      \n      $picker.find('.next-month').on('click', () => {\n        if (currentJalali.jm === 12) {\n          currentJalali.jm = 1;\n          currentJalali.jy++;\n        } else {\n          currentJalali.jm++;\n        }\n        updateCalendar();\n      });\n      \n      // OK button handler\n      $picker.find('.btn-ok').on('click', () => {\n        const hour = parseInt($picker.find('.hour-input').val()) || 0;\n        const minute = parseInt($picker.find('.minute-input').val()) || 0;\n        \n        const jalaliStr = `${formatJalaliDate(currentJalali.jy, currentJalali.jm, currentJalali.jd)} ${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`;\n        $input.val(jalaliStr);\n        \n        // Convert to Gregorian for storage\n        const gregorian = jToG(currentJalali.jy, currentJalali.jm, currentJalali.jd);\n        const gregorianStr = `${gregorian.gy}-${String(gregorian.gm).padStart(2, '0')}-${String(gregorian.gd).padStart(2, '0')} ${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}:00`;\n        me.set_value(gregorianStr);\n        \n        $picker.hide();\n      });\n      \n      // Cancel button handler\n      $picker.find('.btn-cancel').on('click', () => {\n        $picker.hide();\n      });\n      \n      // Show picker on input click\n      $input.on('click', (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        \n        // Set current month to input value if exists\n        const inputValue = $input.val();\n        if (inputValue) {\n          const parts = inputValue.split(' ');\n          if (parts.length === 2) {\n            const jalali = parseJalaliDate(parts[0]);\n            if (jalali) {\n              currentJalali = { jy: jalali.jy, jm: jalali.jm, jd: jalali.jd };\n            }\n            \n            const timeParts = parts[1].split(':');\n            if (timeParts.length === 2) {\n              selectedTime.hour = parseInt(timeParts[0]) || 0;\n              selectedTime.minute = parseInt(timeParts[1]) || 0;\n            }\n          }\n        }\n        \n        updateCalendar();\n        \n        // Position picker\n        const inputRect = $input[0].getBoundingClientRect();\n        $picker.css({\n          position: 'fixed',\n          top: inputRect.bottom + window.scrollY + 5,\n          left: inputRect.left + window.scrollX,\n          display: 'block'\n        });\n      });\n      \n      // Hide picker when clicking outside\n      $(document).on('click', (e) => {\n        if (!$(e.target).closest('.jalali-datetime-picker, .form-control').length) {\n          $picker.hide();\n        }\n      });\n      \n      // Initialize picker\n      updateCalendar();\n    }\n\n    set_formatted_input(value) {\n      try {\n        const r = super.set_formatted_input(value);\n        \n        // Convert Gregorian to Jalali for display\n        if (value) {\n          const gregorianDate = new Date(value + 'Z');\n          const jalali = gToJ(gregorianDate);\n          const hh = String(gregorianDate.getHours()).padStart(2, \"0\");\n          const mm = String(gregorianDate.getMinutes()).padStart(2, \"0\");\n          const jalaliStr = `${formatJalaliDate(jalali.jy, jalali.jm, jalali.jd)} ${hh}:${mm}`;\n          this.$input.val(jalaliStr);\n        }\n        \n        return r;\n      } catch(e) {\n        return super.set_formatted_input(value);\n      }\n    }\n  }\n\n  frappe.ui.form.ControlDate = JalaliControlDate;\n  frappe.ui.form.ControlDatetime = JalaliControlDatetime;\n  console.log(\"ControlDate & ControlDatetime patched for Jalali\");\n}\n\n// Call overrideControlsWhenReady only if jalaliEnabled is true\noverrideControlsWhenReady();\n\n})(); // End of async IIFE\n\n\n", "(async function() {\n  // Check if Jalali calendar is enabled\n  let jalaliEnabled = false;\n  \n  try {\n    const result = await frappe.call({ method: \"persian_calendar.jalali_support.api.is_jalali_enabled\" });\n    jalaliEnabled = result && result.message;\n    console.log(\"Jalali calendar enabled:\", jalaliEnabled);\n  } catch(e) {\n    console.log(\"Error checking Jalali settings:\", e);\n    jalaliEnabled = false;\n  }\n\n  if (!jalaliEnabled) {\n    console.log(\"Jalali calendar is disabled, skipping formatters\");\n    return;\n  }\n\n  function g2j_str(value) {\n    try {\n      // Parse as UTC to avoid TZ shifts and month off-by-one\n      const d = new Date(value + (value.length === 10 ? 'T00:00:00Z' : 'Z'));\n      if (isNaN(d)) return value;\n      const j = toJalali(d.getUTCFullYear(), d.getUTCMonth()+1, d.getUTCDate());\n      return `${j.jy}-${String(j.jm).padStart(2,\"0\")}-${String(j.jd).padStart(2,\"0\")}`;\n    } catch(e) {\n      return value;\n    }\n  }\n\n  // Global datetime helpers \u2192 force Jalali display in UI components (lists/reports)\n  const dt = frappe.datetime;\n  const orig_str_to_user = dt.str_to_user?.bind(dt);\n  const orig_str_to_user_with_default = dt.str_to_user_with_default?.bind(dt);\n  const orig_format_date = dt.format_date?.bind(dt);\n  const orig_format_datetime = dt.format_datetime?.bind(dt);\n\n  if (orig_str_to_user) {\n    dt.str_to_user = function(value) {\n      if (!value) return value;\n      const is_datetime = typeof value === \"string\" && value.length > 10 && value.includes(\":\");\n      if (is_datetime) {\n        const date = value.slice(0, 10);\n        const time = value.slice(11, 19);\n        return `${g2j_str(date)} ${time}`.trim();\n      }\n      return g2j_str(value);\n    };\n  }\n  if (orig_str_to_user_with_default) {\n    dt.str_to_user_with_default = function(value) {\n      if (!value) return value;\n      return dt.str_to_user(value);\n    };\n  }\n  if (orig_format_date) {\n    dt.format_date = function(date_str) { return g2j_str(date_str); };\n  }\n  if (orig_format_datetime) {\n    dt.format_datetime = function(value) {\n      if (!value) return value;\n      const date = value.slice(0, 10);\n      const time = value.slice(11, 19) || \"\";\n      return `${g2j_str(date)} ${time}`.trim();\n    };\n  }\n\n  frappe.form.formatters.date = function(value, df, options, doc) {\n    if (!value) return value;\n    return g2j_str(value);\n  };\n  frappe.form.formatters.datetime = function(value, df, options, doc) {\n    if (!value) return value;\n    const d = new Date(value);\n    if (isNaN(d)) return value;\n    const j = toJalali(d.getFullYear(), d.getMonth()+1, d.getDate());\n    const time = value.slice(11, 19) || \"\";\n    return `${j.jy}-${String(j.jm).padStart(2,\"0\")}-${String(j.jd).padStart(2,\"0\")} ${time}`;\n  };\n})();\n\n\n", "// Auto-refresh functionality for Jalali Settings\n// Wait for frappe to be available\n(function() {\n  function initAutoRefresh() {\n    if (typeof frappe !== 'undefined' && frappe.ui && frappe.ui.form) {\n      // Listen for form events on Jalali Settings\n      frappe.ui.form.on('Jalali Settings', {\n        refresh: function(frm) {\n          // Add custom save button behavior\n          frm.page.add_inner_button(__('Save & Reload'), function() {\n            frm.save().then(function() {\n              // Show success message\n              frappe.show_alert({\n                message: __('\u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u0630\u062E\u06CC\u0631\u0647 \u0634\u062F. \u0635\u0641\u062D\u0647 \u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F...'),\n                indicator: 'green'\n              });\n              \n              // Reload page after a short delay\n              setTimeout(function() {\n                window.location.reload();\n              }, 1000);\n            });\n          });\n        },\n\n        after_save: function(frm) {\n          console.log(\"Jalali Settings after_save triggered\");\n          \n          // Always reload after save for Jalali Settings\n          frappe.msgprint(__(\"\u062A\u0646\u0638\u06CC\u0645\u0627\u062A \u062A\u0642\u0648\u06CC\u0645 \u062C\u0644\u0627\u0644\u06CC \u0630\u062E\u06CC\u0631\u0647 \u0634\u062F. \u0635\u0641\u062D\u0647 \u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F...\"));\n          setTimeout(function() {\n            window.location.reload();\n          }, 1500);\n        },\n\n        onload: function(frm) {\n          console.log(\"Jalali Settings onload triggered\");\n          // Store original values for debugging\n          if (!frm.is_new()) {\n            console.log(\"Original values:\", {\n              enable_jalali: frm.doc.enable_jalali,\n              default_calendar: frm.doc.default_calendar,\n              computation_priority: frm.doc.computation_priority,\n              week_start: frm.doc.week_start,\n              week_end: frm.doc.week_end\n            });\n          }\n        }\n      });\n    } else {\n      // Retry after a short delay\n      setTimeout(initAutoRefresh, 100);\n    }\n  }\n\n  // Start initialization\n  initAutoRefresh();\n})();\n"],
  "mappings": "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",
  "names": ["toJalali", "toGregorian"]
}
